!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.AdequateTabs=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d;d=a("./tabbed_view.coffee"),b.exports={TabbedView:d}},{"./tabbed_view.coffee":6}],2:[function(a,b,c){var d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.tagName="li",b.prototype.className="Tab",b.prototype.template=_.template("<%= label %>"),b.prototype.triggers={click:"item:click"},b}(Marionette.ItemView),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.tagName="ul",b.prototype.className="Tabs",b.prototype.childView=d,b.prototype.initialize=function(a){if(!a.tabs)throw new Error("Tabnav requires tabs.");return this.tabs=a.tabs,this.listenTo(this.tabs.model,"change:current_tab_id",this.setActiveItem),this.listenTo(this,"render",this.setActiveItem),this.listenTo(this.collection,"change:visible",this.onChangeTabVisible)},b.prototype.childEvents={"item:click":"onClickItem"},b.prototype.onClickItem=function(a){return this.tabs.setCurrentTabId(a.model.get("id"))},b.prototype.setActiveItem=function(){var a,b;return this.$(".active").removeClass("active"),a=this.tabs.getCurrentTab(),a?(b=this.children.findByModel(a),b.$el.addClass("active")):void 0},b.prototype.showCollection=function(){var a,b;a=void 0,b=this.collection.where({visible:!0}),_(b).each(function(b,c){a=this.getChildView(b),this.addChild(b,a,c)},this)},b.prototype.onChangeTabVisible=function(a,b,c){var d,e;return b?this.render():(d=this.collection.indexOf(a)-1||0,e=this.children.findByModel(a),e.remove(),this.tabs.showTabByIndex(d))},b}(Marionette.CollectionView),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.tagName="option",b.prototype.template=_.template("<%= label %>"),b.prototype.initialize=function(){return this.$el.attr("value",this.model.cid)},b}(Marionette.ItemView),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.tagName="select",b.prototype.className="tabmenu",b.prototype.childView=f,b.prototype.initialize=function(a){if(!a.tabs)throw new Error("Tabnav requires tabs.");return this.tabs=a.tabs,this.collection=a.tabs.collection,this.listenTo(this.tabs.model,"change:current_tab_id",this.setActiveItem),this.listenTo(this,"render",this.setActiveItem)},b.prototype.events={change:"onSelectItem"},b.prototype.onRender=function(){return this.$el.prepend("<option disabled>Select one:</option>")},b.prototype.onSelectItem=function(){var a,b;return a=this.$el.val(),b=this.collection.get(a),this.tabs.setCurrentTabId(b.get("id"))},b.prototype.setActiveItem=function(){var a;return a=this.tabs.getCurrentTab(),a&&a.cid?this.$el.val(a.cid):void 0},b}(Marionette.CollectionView),b.exports={ButtonBarView:e,MenuView:g}},{}],3:[function(a,b,c){var d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;Backbone.History.prototype.route=function(a,b,c){return this.handlers.unshift({router:c,route:a,callback:b})},d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.initialize=function(a){return _.bindAll(this,"checkState"),_.defer(this.checkState)},b.prototype.checkState=function(){return Backbone.History.started?Backbone.history.loadUrl():(Backbone.history||(Backbone.history=new Backbone.History),Backbone.history.start())},b.prototype.route=function(a,b,c){var d;return _.isRegExp(a)||(a=this._routeToRegExp(a)),_.isFunction(b)&&(c=b,b=""),c||(c=this[b]),d=this,Backbone.history.route(a,function(e){var f;f=d._extractParameters(a,e),d.execute(c,f),d.trigger.apply(d,["route:"+b].concat(f)),d.trigger("route",b,f),Backbone.history.trigger("route",d,b,f)},this),this},b.prototype._addAppRoute=function(a,b,c){return this.options.scope&&(b=this.options.scope+"/"+b),Marionette.AppRouter.prototype._addAppRoute.apply(this,[a,b,c])},b.prototype.navigate=function(a,b){var c,d,e,f;return b=b||{},c=Backbone.history.fragment,f=_.isFunction(this.options.scope)?this.options.scope():this.options.scope,d={},e=void 0,!f||(a?(a=f+"/"+a,e=new RegExp(f+"/?$","i"),c.match(e)&&(d.replace=!0)):a=f,e=new RegExp(f,"i"),c.match(e)||b.force)?(e=new RegExp(a),c.match(e)&&!b.force?this:(e=new RegExp(a+"/?$","i"),c.match(e)&&(d.replace=!0),_.defaults(b,d),Marionette.AppRouter.prototype.navigate.apply(this,[a,b]))):(console.error("Tab URL is out of scope.",f,c),this)},b.prototype.destroy=function(){return Backbone.history.handlers=_.filter(Backbone.history.handlers,function(a){return a.router!==this},this)},b}(Marionette.AppRouter),b.exports=d},{}],4:[function(a,b,c){var d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.initialize=function(){return this.cid=_.uniqueId("controller"),this.scope_model=new Backbone.Model},b.prototype.setCurrentTabIdForScope=function(a,b){if(a){if(!b)throw new Error("tab_id required");return this.scope_model.set(a,b)}},b.prototype.getCurrentTabIdForScope=function(a){return this.scope_model.get(a)||""},b}(Marionette.Controller),b.exports=d},{}],5:[function(a,b,c){var d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.defaults={destroy:!0,label:"",viewOptions:{},visible:!0},b.prototype.initialize=function(){return this.on("invalid",function(){return console.error(this.get("id"),this.validationError)})},b.prototype.getView=function(){var a,b,c;return a=this.get("view"),b=this.get("viewOptions"),_.isFunction(b)&&(b=b()),c=new a(b),c.$el.addClass("tab tab-"+this.get("id")),c},b.prototype.validate=function(a){return a.id?a.view?!a.view.prototype instanceof Backbone.View?"Tab view must be a Backbone.View":_.isUndefined(a.label)?"Tab requires a label.":void 0:"Tab requires a view.":"Tab requires an id."},b}(Backbone.Model),b.exports=d},{}],6:[function(a,b,c){var d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("./tabs.coffee"),f=[],d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="tabbed",b.prototype.template=_.template('<div class="tab-nav"></div><div class="tab-content"></div>'),b.prototype.regions={nav:".tab-nav",content:".tab-content"},b.prototype.initialize=function(){return f.push(this),this.listenTo(this.tabs.model,"change:current_tab_id",this.onChangeTab)},b.prototype.onBeforeDestroy=function(){return f=_.filter(f,function(a){return a.cid!==this.cid},this)},b.prototype.onChangeTab=function(a,b){},b.prototype.behaviors=function(){var a;return a=_.extend({behaviorClass:e,region:this.content,tabs:[],nav:{region:this.nav}},_.result(this,"tabOptions")),{Tabs:a}},b}(Marionette.LayoutView),b.exports=d},{"./tabs.coffee":7}],7:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n={}.hasOwnProperty;g=a("./router.coffee"),e=a("./scoped_controller.coffee"),h=a("./tab.coffee"),l=a("./nav.coffee"),d=l.ButtonBarView,f=l.MenuView,i=Backbone.Collection.extend({model:h}),k=void 0,j=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.initialize=function(){var a;if(this.options=this.options||{},_.defaults(this.options,{tabs:[],routing:!0,show_initial_tab:!0,initial_tab_id:"",wraparound:!1}),!this.options.region)throw new Error("Tabs behavior requires a region");return this.cid=_.uniqueId("tabs"),this.view.tabs=this,k||(k=new e),this.options.initial_tab_id||(a=k.getCurrentTabIdForScope(this.options.scope),a&&(this.options.initial_tab_id=a)),_.bindAll(this,"initializeRouter"),this.model=new Backbone.Model({current_tab_id:this.options.initial_tab_id}),this.collection=new i,_.bindAll(this,"autoShowFirstTab"),this.autoShowFirstTab=_.debounce(this.autoShowFirstTab,20)},b.prototype.initializeRouter=function(){return this.options.routing?this.router=new g({controller:this,scope:this.options.scope,appRoutes:{"(:tab_id)(/)(*params)":"routeTabId"}}):void 0},b.prototype.onShow=function(){return this.listenTo(this.model,"change:current_tab_id",this.onChangeCurrentTabId),this.on("next",this.showNextTab),this.on("previous",this.showPreviousTab),this.addTabs(this.options.tabs),this.options.nav&&this.createNav(),_.defer(this.autoShowFirstTab)},b.prototype.onDestroy=function(){return this.router?this.router.destroy():void 0},b.prototype.onChangeCurrentTabId=function(a,b,c){return this.showCurrentTab(c),k.setCurrentTabIdForScope(this.options.scope,this.model.get("current_tab_id"))},b.prototype.addTab=function(a){return a instanceof h||(a=new h(a)),a.isValid()?this.collection.add(a):a.validationError},b.prototype.addTabs=function(a){return _.each(a,function(a){this.addTab(a)},this)},b.prototype.getTabById=function(a){return this.collection.findWhere({id:a})},b.prototype.getCurrentTab=function(){var a;return a=this.model.get("current_tab_id"),this.getTabById(a)},b.prototype.showCurrentTab=function(a){var b,c,d,e;if(a=a||{},d=this.getCurrentTab(),d&&d.isValid()){if(d.get("shown"))return;return c=this.model.get("last_tab_id"),b=this.getTabById(c),b&&(a.preventDestroy=!b.get("destroy")),e=d.getView(),this.view.triggerMethod("before:show:tab",e),this.options.region.show(e,a),d.set("shown",!0),this.listenTo(e,"destroy",function(){return d.unset("shown")}),this.view.triggerMethod("show:tab",e),this.setHistory(a)}return this.options.region.empty(),this.setHistory(a)},b.prototype.routeTabId=function(a){return this.setCurrentTabId(a)},b.prototype.setCurrentTabId=function(a,b){var c,d;return b=b||{},d=this.getTabById(a),d&&d.isValid()?(c=this.model.get("current_tab_id"),this.model.set("last_tab_id",c,b),this.model.set("current_tab_id",a,b)):void 0},b.prototype.showTabById=function(a,b){return this.setCurrentTabId(a,b)},b.prototype.showTabByIndex=function(a){var b;return this.options.wraparound?(0>a&&(a=this.collection.length-1),a>this.collection.length-1&&(a=0)):(a=Math.max(0,a),a=Math.min(a,this.collection.length-1)),b=this.collection.at(a),this.setCurrentTabId(b.get("id"))},b.prototype.showNextTab=function(){var a,b;return b=this.getCurrentTab(),a=this.collection.indexOf(b),a++,this.showTabByIndex(a)},b.prototype.showPreviousTab=function(){var a,b;return b=this.getCurrentTab(),a=this.collection.indexOf(b),a--,this.showTabByIndex(a)},b.prototype.autoShowFirstTab=function(){var a;return this.options.show_initial_tab&&(a=this.collection.first())?(this.setCurrentTabId(a.get("id"),{replace:!0}),this.showCurrentTab()):void 0},b.prototype.createNav=function(){var a;if(_.defaults(this.options.nav,{view:d,viewOptions:{}}),!this.options.nav.region)throw new Error("Tab nav requires a region");return a=_.extend(this.options.nav.viewOptions,{tabs:this,collection:this.collection}),this.nav=new this.options.nav.view(a),this.options.nav.region.show(this.nav)},b.prototype.setHistory=function(a){var b;if(this.router)return b=this.model.get("current_tab_id"),this.router.navigate(b,a)},b}(Marionette.Behavior),j.ButtonBarView=d,j.MenuView=f,b.exports=j},{"./nav.coffee":2,"./router.coffee":3,"./scoped_controller.coffee":4,"./tab.coffee":5}]},{},[1])(1)});